# main configuration file for keepright

# this file is to be formatted as a valid bash script
# double quotes around values are mandatory

# a second config file resides in keepright/webconfig.inc.php
# it holds just the options needed for the web server,
# sensitive information contained herein is stripped

#
# written by Harald Kleiner, March 2009
#


############################################
# Database credentials
############################################

# the main database server.
# this is the PostGIS server the checks run
# the main db server may have many databases (see below)

MAIN_DB_HOST="localhost"
MAIN_DB_USER="osm"
MAIN_DB_PASS="osm"


# the web server's database server.
# this is the MySQL server behind the web presentation
# please note: you have to duplicate these credentials
# in the file keepright/webconfig.inc.php!

WEB_DB_HOST="localhost"
WEB_DB_USER="root"
WEB_DB_PASS="haraldk"
WEB_DB_NAME="osm_EU"



############################################
# Configuration for database import script updateDB.sh
############################################

# the root directory
PREFIX="/home/haraldk/OSM/keepright/"

# a separate high speed partition preferably
TMPDIR=$PREFIX"planet"

# to turn off downloading the planet file and use
# the old one set this parameter to one
KEEP_OSM="0"

# this is where the check scripts reside
CHECKSDIR=$PREFIX"checks"

PSQL_LOAD_SCRIPT=$TMPDIR"/pgsql_simple_load.sql"


# this is where the result files will be placed
# you HAVE TO specify the full path names here,
# e.g. inserting $RESULTSDIR into ERROR_VIEW_FILE will
# not work because these paremeters are read by a php script
RESULTSDIR="/home/haraldk/OSM/keepright/results"

ERROR_VIEW_FILE="/home/haraldk/OSM/keepright/results/error_view"
ERROR_TYPES_FILE="/home/haraldk/OSM/keepright/results/error_types"


# set this to 0 for local use (testing) only
# set this to 1 if you want to upload the results to a web space
CREATE_COMPRESSED_DUMPS="1"

############################################
# Download URLs for various databases
############################################

# use ISO country codes to separate different locations
# calling 'updateDB.sh DE' will lead to use of URL_DE,
# FILE_DE, DB_DE, CAT_DE as download parameters.
# Use MIN_SIZE parameter to automatically check if the downloaded
# planet file is complete. Give a file size in KB.

URL_DE="http://download.geofabrik.de/osm/europe/germany.osm.bz2"
FILE_DE="germany.osm.bz2"
MAIN_DB_NAME_DE="osm_DE"
CAT_DE="bzcat"
MIN_SIZE_DE="350000"

URL_NL="http://download.geofabrik.de/osm/europe/netherlands.osm.bz2"
FILE_NL="netherlands.osm.bz2"
MAIN_DB_NAME_NL="osm_NL"
CAT_NL="bzcat"
MIN_SIZE_NL="60000"

URL_AT="http://download.geofabrik.de/osm/europe/austria.osm.bz2"
FILE_AT="austria.osm.bz2"
MAIN_DB_NAME_AT="osm_AT"
CAT_AT="bzcat"
MIN_SIZE_AT="75000"

URL_EU="http://download.geofabrik.de/osm/europe.osm.bz2"
FILE_EU="europe.osm.bz2"
MAIN_DB_NAME_EU="osm_EU"
CAT_EU="bzcat"
MIN_SIZE_EU="1200000"

URL_XA="http://download.geofabrik.de/osm/africa.osm.bz2"
FILE_XA="africa.osm.bz2"
MAIN_DB_NAME_XA="osm_XA"
CAT_XA="bzcat"
MIN_SIZE_XA="80000"

URL_MG="http://download.geofabrik.de/osm/africa/madagascar.osm.bz2"
FILE_MG="madagascar.osm.bz2"
MAIN_DB_NAME_MG="osm_MG"
CAT_MG="bzcat"
MIN_SIZE_MG="2500"

URL_AU="http://download.geofabrik.de/osm/australia-oceania.osm.bz2"
FILE_AU="australia-oceania.osm.bz2"
MAIN_DB_NAME_AU="osm_AU"
CAT_AU="bzcat"
MIN_SIZE_AU="90000"

URL_XB="http://download.geofabrik.de/osm/north-america.osm.bz2"
FILE_XB="north-america.osm.bz2"
MAIN_DB_NAME_XB="osm_XB"
CAT_XB="bzcat"
MIN_SIZE_XB="70000"

URL_XC="http://download.geofabrik.de/osm/south-america.osm.bz2"
FILE_XC="south-america.osm.bz2"
MAIN_DB_NAME_XC="osm_XC"
CAT_XC="bzcat"
MIN_SIZE_XC="70000"

URL_XD="http://download.geofabrik.de/osm/asia.osm.bz2"
FILE_XD="asia.osm.bz2"
MAIN_DB_NAME_XD="osm_XD"
CAT_XD="bzcat"
MIN_SIZE_XD="220000"

# ZZ stands for the whole planet
URL_ZZ="http://ftp.ecki-netz.de/osm/planet-latest.osm.bz2"
FILE_ZZ="planet.osm.bz2"
MAIN_DB_NAME_ZZ="osm"
CAT_ZZ="bzcat"
MIN_SIZE_ZZ="4000000"



############################################
# web space ftp account
############################################

FTP_HOST="ftp.yourprovider.com"
FTP_USER="yourname"
FTP_PASS="shh!"

# do not give a slash at the beginning, but leave one
# at the end of this path
FTP_PATH="path/to/website/"

# the error_view export file will be split into chunks.
# configure the size of each chunk small enough so that
# the updateTables.php script will successfully import
# each chunk before the max_execution_time limit
# configured by your web hoster kills it
MAX_LINES_PER_FILE="200000"

# this URL will be called to load data into the tables
UPDATE_TABLES_URL="http://website.yourprovider.com/webUpdateServer.php"

# shared secret for use in updateTables script to prevent anonymous
# users from emptying your tables. You HAVE TO change this password.
# The script will not work with default settings
UPDATE_TABLES_PASSWD="shhh!"


# this is the username you will be using on your local machine
# for editing keepright source files
# the admin interface will try to sudo into this user when
# modifying the config file
# to make this work, add the following lines to your sudoers file
# www-data ALL=(haraldk) NOPASSWD: /home/osm/keepright/checks/updateDB.sh
# www-data ALL=(haraldk) NOPASSWD: /usr/bin/svn
ADMIN_USERNAME="haraldk"

############################################
# error types
############################################

CHECK_0010_NAME="deleted items"
CHECK_0010_ENABLED="0"
CHECK_0010_FILE="0010_deleted_items.php"
CHECK_0010_DESCRIPTION="Deleted items should not be used in conjunction with not deleted items. This can be ways that contain deleted nodes or deleted ways/nodes that are member of relations."

CHECK_0020_NAME="multiple nodes on the same spot"
CHECK_0020_ENABLED="0"
CHECK_0020_FILE="0020_multiple_nodes_on_same_spot.php"
CHECK_0020_DESCRIPTION="Try to find nodes that are (almost) on the same spot by snapping in node coordinates to integer multiples of a raster unit."

CHECK_0030_NAME="non-closed areas"
CHECK_0030_ENABLED="1"
CHECK_0030_FILE="0030_non-closed_areas.php"
CHECK_0030_DESCRIPTION="By convention ways tagged with special combinations of key and value pairs are considered to be areas and are drawn as such in the map. Therefore it is necessary that they form closed loops. Non-closed areas are invisible in the map! The standard.xml file is used to determine which key-value-combinations are drawn as areas; any instance of these has to be closed-loop."

CHECK_0040_NAME="dead-ended one-ways"
CHECK_0040_ENABLED="1"
CHECK_0040_FILE="0040_dead-ended_one-ways.php"
CHECK_0040_DESCRIPTION="Streets tagged as one-way must not be dead-ended (where should all the cars pile at the end of the road?). Nodes where just one-way streets begin (or end) cannot be reached (escaped from). Please note that motorways and motorway_links are considered one-way implicitly, so this check applies."

CHECK_0050_NAME="almost-junctions"
CHECK_0050_ENABLED="1"
CHECK_0050_FILE="0050_almost-junctions.php"
CHECK_0050_DESCRIPTION="Streets that have (at least) one unconnected end are examined here. If such an end-node is very close to any other way an error is reported. Unconnected end-nodes should probably be connected to adjacent ways."

CHECK_0060_NAME="deprecated tags"
CHECK_0060_ENABLED="1"
CHECK_0060_FILE="0060_deprecated_tags.php"
CHECK_0060_DESCRIPTION="As shown in http://wiki.openstreetmap.org/index.php/Deprecated_features some tags get replaced by others as new tagging conventions evolve. Consider this as a notice, not as an error. The term 'deprecated' is deprecated; you're free to tag anything the way you like. This is just a hint for new tagging conventions that have evolved in the meantime."

CHECK_0070_NAME="missing tags"
CHECK_0070_ENABLED="1"
CHECK_0070_FILE="0070_missing_tags.php"
CHECK_0070_DESCRIPTION="Ways, nodes and relations should in most cases have at least one tag (besides created_by)"

CHECK_0080_NAME="bridges or tunnels without layer"
CHECK_0080_ENABLED="0"
CHECK_0080_FILE="0080_bridges_or_tunnels_without_layer.php"
CHECK_0080_DESCRIPTION="Bridges and tunnels need a layer tag as a hint for map drawing processes for achieving correct visibility of elements. THIS CHECK IS OBSOLETE."

CHECK_0090_NAME="motorways without ref"
CHECK_0090_ENABLED="1"
CHECK_0090_FILE="0090_motorways_without_ref.php"
CHECK_0090_DESCRIPTION="The ref-tag documents the reference (e.g. 'A 10') for motorways. These are mandatory as they are very important information"

CHECK_0100_NAME="places of worship without religion"
CHECK_0100_ENABLED="1"
CHECK_0100_FILE="0100_places_of_worship_without_religion.php"
CHECK_0100_DESCRIPTION="Churches, mosques and synagogues etc. need an extra religion tag giving info about the religion"

CHECK_0110_NAME="point of interest without name"
CHECK_0110_ENABLED="1"
CHECK_0110_FILE="0110_point_of_interest_without_name.php"
CHECK_0110_DESCRIPTION="The name tag should be specified for every point of interest as its content gets rendered in the map next to the POI symbol"

CHECK_0120_NAME="ways without nodes"
CHECK_0120_ENABLED="1"
CHECK_0120_FILE="0120_ways_without_nodes.php"
CHECK_0120_DESCRIPTION="Ways that don't consist of at least two nodes don't make much sense as they won't get rendered."

CHECK_0130_NAME="floating islands"
CHECK_0130_ENABLED="1"
CHECK_0130_FILE="0130_islands.php"
CHECK_0130_DESCRIPTION="Any highways drawn on the map should be accessible by car starting anywhere in the world. Ferries and highways (even railway platforms) are included in this check, so almost any island in the sea should be reachable starting from the mainland."

CHECK_0140_NAME="ways with name tag, without frequently used tag"
CHECK_0140_ENABLED="0"
CHECK_0140_FILE="0140_ways_with_name_without_highway.php"
CHECK_0140_DESCRIPTION="Ways tagged with a name-tag are supposed to be highways, buildings, amenities etc. So they need more tags defining the type of object. Objects having a name but none of frequently used type tags are reported in this check"

CHECK_0150_NAME="railway crossings without tag"
CHECK_0150_ENABLED="1"
CHECK_0150_FILE="0150_level_crossing_without_tag.php"
CHECK_0150_DESCRIPTION="(Level)-Crossings of railways and highways should have a common node as junction that is tagged with 'railway=level_crossing' if it is a crossing where larger vehicles can cross or with 'railway=crossing' if it is a crossing just for pedestrians"

CHECK_0160_NAME="wrongly used railway crossing tag"
CHECK_0160_ENABLED="1"
CHECK_0160_FILE="0160_wrong_use_of_level_crossing_tag.php"
CHECK_0160_DESCRIPTION="Ways that take part in level-crossings of railways and highways have to be on the same layer and should in the normal case be not tagged as bridge or tunnel"

CHECK_0170_NAME="fixme-tagged items"
CHECK_0170_ENABLED="1"
CHECK_0170_FILE="0170_fixme.php"
CHECK_0170_DESCRIPTION="Nodes, ways or relations that are tagged with FIXME should be reviewed..."

CHECK_0180_NAME="relations without type"
CHECK_0180_ENABLED="1"
CHECK_0180_FILE="0180_relations_without_type.php"
CHECK_0180_DESCRIPTION="Find any relation that has no type tag, wich is mandatory for relations."

CHECK_0190_NAME="intersections without junctions"
CHECK_0190_ENABLED="1"
CHECK_0190_FILE="0190_intersections_without_junctions.php"
CHECK_0190_DESCRIPTION="Streets that graphically intersect need a common node that represents the crossing. The only exception are intersections on different layers (eg. bridges or tunnels)."

SUBTYPE_0191_NAME="highway-highway"
SUBTYPE_0192_NAME="highway-waterway"
SUBTYPE_0193_NAME="highway-riverbank"
SUBTYPE_0194_NAME="waterway-waterway"

CHECK_0200_NAME="overlapping ways"
CHECK_0200_ENABLED="1"
CHECK_0200_FILE=""
CHECK_0200_DESCRIPTION="Segments of ways that lie on top of each other (the same nodes connected by different ways in the same order) are a problem for routing software. They happen accidently and are hard to find."

SUBTYPE_0201_NAME="highway-highway"
SUBTYPE_0202_NAME="highway-waterway"
SUBTYPE_0203_NAME="highway-riverbank"
SUBTYPE_0204_NAME="waterway-waterway"

CHECK_0210_NAME="loopings"
CHECK_0210_ENABLED="1"
CHECK_0210_FILE="0210_loopings.php"
CHECK_0210_DESCRIPTION="Any way that contains any single node more than twice is considered an error. Any way may contain just one node twice. If more than one node is found twice it is considered an error."

CHECK_0220_NAME="misspelled tags"
CHECK_0220_ENABLED="1"
CHECK_0220_FILE="0220_misspelled_tags.php"
CHECK_0220_DESCRIPTION="Tags that are used very seldom and almost look like very common tags (only one character difference) are reported as a warning."

CHECK_0230_NAME="layer conflicts"
CHECK_0230_ENABLED="0"
CHECK_0230_FILE="0230_layer_conflicts.php"
CHECK_0230_DESCRIPTION="Connected ways should be on the same layer. Please note that bridges are set to layer +1, and tunnels to -1, anything else to layer 0 implicitly"
